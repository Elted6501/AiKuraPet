<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Log</title>

  <link rel="stylesheet" href="/css/log.css" />
  <link rel="stylesheet" href="/css/nav.css" />
  <link rel="stylesheet" href="/css/Footer.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
</head>

<body>
  <%- include('partials/nav')%>

    <% if (petsData.length> 0) { %>

      <% petsData.forEach(pet=> { %>


        <section class="table-section">
          <div class="table-container">
            <div class="table">
              <div class="table-cell">
                <img class="imgtbl" src="
                
               <%= pet.image == null ? pet.image : https://res.cloudinary.com/dglqsxwon/image/upload/v1722710366/AiKuraPet/a6am5bef36yq3s13i5rv.png  %>" alt="Imagen 1">
                <div class="nameage">
                  <div class="textos">
                    <h2>
                      <%= pet.name %>"
                    </h2>
                    <h2 class="espacioentretextos">
                      <%= pet.age %>"
                    </h2>
                  </div>
                  <div class="iconsok">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24">
                      <g fill="none" stroke="black" stroke-width="1.05">
                        <circle cx="12" cy="12" r="9" />
                        <path d="m8 12l3 3l5-6" />
                      </g>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24">
                      <g fill="none" stroke="black" stroke-width="1.05">
                        <circle cx="12" cy="12" r="9" />
                        <path d="m8 12l3 3l5-6" />
                      </g>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24">
                      <path fill="black" fill-rule="evenodd"
                        d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10m0-1.2a8.8 8.8 0 1 0 0-17.6a8.8 8.8 0 0 0 0 17.6m-.66-14.369h1.32l-.089 7.06H11.43l-.088-7.06zM12 17.073a.825.825 0 0 1-.835-.835a.82.82 0 0 1 .835-.835c.476 0 .835.36.835.835a.82.82 0 0 1-.835.835" />
                    </svg>
                  </div>
                </div>
              </div>
            </div>
            <svg class="edit-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
              <path fill="currentColor"
                d="m21.561 5.318l-2.879-2.879A1.495 1.495 0 0 0 17.621 2c-.385 0-.768.146-1.061.439L13 6H4a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-9l3.561-3.561c.293-.293.439-.677.439-1.061s-.146-.767-.439-1.06M11.5 14.672L9.328 12.5l6.293-6.293l2.172 2.172zm-2.561-1.339l1.756 1.728L9 15zM16 19H5V8h6l-3.18 3.18c-.293.293-.478.812-.629 1.289c-.16.5-.191 1.056-.191 1.47V17h3.061c.414 0 1.108-.1 1.571-.29c.464-.19.896-.347 1.188-.64L16 13zm2.5-11.328L16.328 5.5l1.293-1.293l2.171 2.172z" />
            </svg>
            <button class="btnplus" id="btnPlus">
              <svg xmlns="http://www.w3.org/2000/svg" width="1.2rem" height="1.2rem" viewBox="0 0 24 24">
                <path fill="none" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                  d="M11 8L7 4m0 0L3 8m4-4v16m6-4l4 4m0 0l4-4m-4 4V4" />
              </svg>
            </button>
          </div>
        </section>

        <!-- Tabla adicional oculta inicialmente -->
        <div class="table-section-aditional hidden" id="additionalTable">
          <div class="table-row">

            <div class="container">
              <div class="item">
                <span class="icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                    <g fill="none" stroke="currentColor" stroke-width="1.5">
                      <path
                        d="M12 22a5.5 5.5 0 0 0 3.439-9.793a1.114 1.114 0 0 1-.439-.86V5a3 3 0 1 0-6 0v6.348c0 .338-.175.648-.439.86A5.5 5.5 0 0 0 12 22Z" />
                      <path d="M14.5 16.5a2.5 2.5 0 1 1-5 0a2.5 2.5 0 0 1 5 0Z" />
                      <path stroke-linecap="round" d="M12 14V5" />
                    </g>
                  </svg>
                </span>
                <span>38°</span>
              </div>
              <div class="item">
                <span class="icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 256 256">
                    <path fill="currentColor"
                      d="M72 142H32a6 6 0 0 1 0-12h36.79L83 108.67a6 6 0 0 1 10 0l27 40.51l11-16.51a6 6 0 0 1 5-2.67h24a6 6 0 0 1 0 12h-20.79L125 163.33a6 6 0 0 1-10 0l-27-40.51l-11 16.51a6 6 0 0 1-5 2.67M178 42c-21 0-39.26 9.47-50 25.34C117.26 51.47 99 42 78 42a60.07 60.07 0 0 0-60 60v2.19a6 6 0 0 0 12-.38V102a48.05 48.05 0 0 1 48-48c20.28 0 37.31 10.83 44.45 28.27a6 6 0 0 0 11.1 0C140.69 64.83 157.72 54 178 54a48.05 48.05 0 0 1 48 48c0 55.73-81.61 105.65-98 115.11c-9.84-5.66-43.09-25.82-68.16-53.16a6 6 0 1 0-8.84 8.1c30.94 33.77 72.41 56.29 74.16 57.23a6 6 0 0 0 5.68 0a334.7 334.7 0 0 0 53.06-37C219.8 161.59 238 131.2 238 102a60.07 60.07 0 0 0-60-60" />
                  </svg>
                </span>
                <span>170bpm</span>
              </div>
              <div class="item">
                <span class="icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
                    <path fill="currentColor"
                      d="M16 18a5 5 0 1 1 5-5a5.006 5.006 0 0 1-5 5m0-8a3 3 0 1 0 3 3a3.003 3.003 0 0 0-3-3" />
                    <path fill="currentColor"
                      d="m16 30l-8.436-9.949a35 35 0 0 1-.348-.451A10.9 10.9 0 0 1 5 13a11 11 0 0 1 22 0a10.9 10.9 0 0 1-2.215 6.597l-.001.003s-.3.394-.345.447ZM8.813 18.395s.233.308.286.374L16 26.908l6.91-8.15c.044-.055.278-.365.279-.366A8.9 8.9 0 0 0 25 13a9 9 0 1 0-18 0a8.9 8.9 0 0 0 1.813 5.395" />
                  </svg>
                </span>
                <span>Fuera de casa. C. Priv. de Panamericana y Sauces #4 Col. Mármól viejo</span>
              </div>
            </div>
          </div>
          <iframe class="mapa"
            src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d28004.718016642862!2d-106.0339712!3d28.672!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1ses!2smx!4v1718297806509!5m2!1ses!2smx"
            allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
          <a class="btnhistory" href="/historial/<%= pet.id %>">
            My pet´s history
          </a>

        </div>
        <% }); %>
          <% } %>

            <div id="btnadd">
              <button class="btnonemore">

                <img class="onemore" src="/img/onemore.png">

              </button>
            </div>

            <!-- Modal -->
            <form action="/add/pet" method="post" enctype="multipart/form-data">
              <div id="myModal" class="modal">
                <div class="modal-content">
                  <span class="close" onclick="closeModal()">&times;</span>

                  <div class="file-input-container">
                    <input class="file-input" type="file" id="file-input" name="img" accept="image/*"
                      onchange="previewImage(event)">
                    <label for="file-input" class="custom-file-label">Choose an image</label>
                    <img id="image-preview" src="" alt="Image Preview" class="image-preview">
                  </div>

                  <div class="form-container">
                    <label for="name"></label>
                    <input type="text" id="name" name="name" placeholder="Name">

                    <label for="specie"></label>
                    <select type="text" id="specie" name="specie" placeholder="Specie">
                      <option value="Dog">Dog</option>
                      <option value="Cat">Cat</option>
                    </select>

                    <label for="breed"></label>
                    <select type="text" id="breed" name="breed" placeholder="Breed">
                      <% breeds.forEach(breed=> { %>
                        <option value="<%= breed %>">
                          <%= breed %>
                        </option>
                        <% }); %>
                    </select>

                    <label for="age"></label>
                    <input type="number" id="age" name="age" placeholder="Age">

                    <label for="weight"></label>
                    <input type="number" id="weight" name="weight" placeholder="Weight">

                    <label for="id-collar"></label>
                    <input type="text" id="id-collar" name="idcollar" placeholder="ID Collar">

                    <label for="Address"></label>
                    <input type="text" id="address" name="address" placeholder="Address">
                  </div>

                  <div class="mapa100">
                    <iframe class="mapa"
                      src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d28004.718016642862!2d-106.0339712!3d28.672!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1ses!2smx!4v1718297806509!5m2!1ses!2smx"
                      allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                  </div>

                  <button type="submit" class="confirm-button" onclick="confirmData()">Add</button>

                </div>
              </div>
            </form>

            <%- include('partials/footer')%>

</body>

<!-- Botón que despliega los botones adicionales -->
<script>
  var btn = document.querySelector(".btnLogIn");
  var dropdown = document.getElementById("dropdown");

  // Cuando el usuario haga clic en el botón, mostrar/ocultar los botones adicionales
  btn.onclick = function (event) {
    event.stopPropagation();
    dropdown.classList.toggle("show");
  };

  // Cerrar el dropdown si el usuario hace clic fuera de él
  window.onclick = function (event) {
    if (!event.target.matches(".btnLogIn")) {
      if (dropdown.classList.contains("show")) {
        dropdown.classList.remove("show");
      }
    }
  };
</script>

<script>
  // Modal
  var modal = document.getElementById("myModal");
  // Botón que abre el modal
  var btn = document.querySelector(".btnonemore");
  let btnadd = document.getElementById("btnadd");
  // <span> que cierra el modal
  var span = document.getElementsByClassName("close")[0];
  // Clic en el botón, abrir el modal
  const additionalTable = document.getElementById('additionalTable');

  btn.onclick = function () {
    modal.style.display = "block";
    btnadd.style.display = "none";
    additionalTable.classList.add("hidden");
  };
  // Clic en <span> (x), cerrar el modal
  span.onclick = function () {
    modal.style.display = "none";
    btnadd.style.display = "block";
  };
</script>

<script>
  function closeModal() {
    document.getElementById("myModal").style.display = "none";
  }
  function confirmData() {
    alert("Your pet was added");
    closeModal();
  }
</script>

<script>
  function previewImage(event) {
    const input = event.target;
    const preview = document.getElementById("image-preview");
    if (input.files && input.files[0]) {
      const reader = new FileReader();
      reader.onload = function (e) {
        preview.src = e.target.result;

        preview.style.display = "block";
      };
      reader.readAsDataURL(input.files[0]);
    }
  }
</script>

<script>
  // Botón que despliega los botones adicionales
  var btn = document.querySelector(".btnLogIn");
  var dropdown = document.getElementById("dropdown");
  // Cuando el usuario haga clic en el botón, mostrar/ocultar los botones adicionales
  btn.onclick = function (event) {
    event.stopPropagation();
    dropdown.classList.toggle("show");
  };
  // Cerrar el dropdown si el usuario hace clic fuera de él
  window.onclick = function (event) {
    if (!event.target.matches(".btnLogIn")) {
      if (dropdown.classList.contains("show")) {
        dropdown.classList.remove("show");
      }
    }
  };
</script>

<script>

  document.getElementById('btnPlus').addEventListener('click', function () {

    if (additionalTable.classList.contains('hidden')) {
      additionalTable.classList.remove('hidden')
    } else {
      additionalTable.classList.add("hidden");
    }

  });

</script>

</html>